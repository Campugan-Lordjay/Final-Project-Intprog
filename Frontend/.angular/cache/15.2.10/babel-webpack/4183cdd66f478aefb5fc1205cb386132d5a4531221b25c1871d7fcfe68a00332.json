{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@app/_services/request.service\";\nimport * as i4 from \"@app/_services/account.service\";\nimport * as i5 from \"@app/_services/employee.service\";\nimport * as i6 from \"@angular/common\";\nfunction AddEditComponent_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"titlecase\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", type_r7);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 2, type_r7));\n  }\n}\nfunction AddEditComponent_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Type is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddEditComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtemplate(1, AddEditComponent_div_14_div_1_Template, 2, 0, \"div\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.f.type.errors.required);\n  }\n}\nfunction AddEditComponent_option_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const emp_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", emp_r9.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate4(\" \", emp_r9.employeeId, \" - \", emp_r9.firstName, \" \", emp_r9.lastName, \" (\", emp_r9.position, \") \");\n  }\n}\nfunction AddEditComponent_div_22_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Employee is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddEditComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtemplate(1, AddEditComponent_div_22_div_1_Template, 2, 0, \"div\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.f.employeeId.errors.required);\n  }\n}\nfunction AddEditComponent_div_27_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Description is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddEditComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtemplate(1, AddEditComponent_div_27_div_1_Template, 2, 0, \"div\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.f.description.errors.required);\n  }\n}\nfunction AddEditComponent_div_37_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Description is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddEditComponent_div_37_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtemplate(1, AddEditComponent_div_37_div_6_div_1_Template, 2, 0, \"div\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r12.get(\"description\").errors.required);\n  }\n}\nfunction AddEditComponent_div_37_div_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Quantity is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddEditComponent_div_37_div_11_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Quantity must be at least 1\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddEditComponent_div_37_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵtemplate(1, AddEditComponent_div_37_div_11_div_1_Template, 2, 0, \"div\", 30);\n    i0.ɵɵtemplate(2, AddEditComponent_div_37_div_11_div_2_Template, 2, 0, \"div\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r12.get(\"quantity\").errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r12.get(\"quantity\").errors.min);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nfunction AddEditComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"div\", 32)(2, \"div\", 33)(3, \"label\", 34);\n    i0.ɵɵtext(4, \"Item Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 35);\n    i0.ɵɵtemplate(6, AddEditComponent_div_37_div_6_Template, 2, 1, \"div\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 36)(8, \"label\", 34);\n    i0.ɵɵtext(9, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 37);\n    i0.ɵɵtemplate(11, AddEditComponent_div_37_div_11_Template, 3, 2, \"div\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 38)(13, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function AddEditComponent_div_37_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const i_r13 = restoredCtx.index;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.removeItem(i_r13));\n    });\n    i0.ɵɵelement(14, \"i\", 40);\n    i0.ɵɵelementStart(15, \"span\");\n    i0.ɵɵtext(16, \"Remove\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const item_r12 = ctx.$implicit;\n    const i_r13 = ctx.index;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroupName\", i_r13);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"for\", \"itemDesc\" + i_r13);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", \"itemDesc\" + i_r13)(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, ctx_r5.submitted && item_r12.get(\"description\").errors));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.submitted && item_r12.get(\"description\").errors);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"for\", \"itemQty\" + i_r13);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"id\", \"itemQty\" + i_r13)(\"ngClass\", i0.ɵɵpureFunction1(11, _c0, ctx_r5.submitted && item_r12.get(\"quantity\").errors));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.submitted && item_r12.get(\"quantity\").errors);\n  }\n}\nfunction AddEditComponent_span_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 41);\n  }\n}\nexport let AddEditComponent = /*#__PURE__*/(() => {\n  class AddEditComponent {\n    formBuilder;\n    route;\n    router;\n    requestService;\n    accountService;\n    employeeService;\n    form;\n    id;\n    isAddMode;\n    loading = false;\n    submitted = false;\n    requestTypes = ['equipment', 'leave', 'resource', 'other'];\n    employees = [];\n    constructor(formBuilder, route, router, requestService, accountService, employeeService) {\n      this.formBuilder = formBuilder;\n      this.route = route;\n      this.router = router;\n      this.requestService = requestService;\n      this.accountService = accountService;\n      this.employeeService = employeeService;\n    }\n    ngOnInit() {\n      this.id = this.route.snapshot.params['id'];\n      this.isAddMode = !this.id;\n      this.form = this.formBuilder.group({\n        type: ['', Validators.required],\n        description: ['', Validators.required],\n        employeeId: ['', Validators.required],\n        items: this.formBuilder.array([])\n      });\n      this.employeeService.getAll().subscribe(employees => {\n        this.employees = employees;\n      });\n      if (!this.isAddMode) {\n        this.loading = true;\n        this.requestService.getById(this.id).pipe(first()).subscribe(request => {\n          this.form.patchValue(request);\n          if (request.items) {\n            request.items.forEach(item => {\n              this.addItem(item);\n            });\n          }\n          this.loading = false;\n        });\n      }\n    }\n    // convenience getters for easy access to form fields\n    get f() {\n      return this.form.controls;\n    }\n    get items() {\n      return this.form.get('items');\n    }\n    addItem(item) {\n      const itemForm = this.formBuilder.group({\n        description: [item?.description || '', Validators.required],\n        quantity: [item?.quantity || 1, [Validators.required, Validators.min(1)]]\n      });\n      this.items.push(itemForm);\n    }\n    removeItem(index) {\n      this.items.removeAt(index);\n    }\n    onSubmit() {\n      this.submitted = true;\n      // stop here if form is invalid\n      if (this.form.invalid) {\n        return;\n      }\n      this.loading = true;\n      if (this.isAddMode) {\n        this.createRequest();\n      } else {\n        this.updateRequest();\n      }\n    }\n    createRequest() {\n      const requestPayload = {\n        ...this.form.value\n      };\n      this.requestService.create(requestPayload).pipe(first()).subscribe({\n        next: () => {\n          this.router.navigate(['../'], {\n            relativeTo: this.route\n          });\n        },\n        error: error => {\n          console.error('Error creating request:', error);\n          this.loading = false;\n        }\n      });\n    }\n    updateRequest() {\n      this.requestService.update(this.id, this.form.value).pipe(first()).subscribe({\n        next: () => {\n          this.router.navigate(['../'], {\n            relativeTo: this.route\n          });\n        },\n        error: error => {\n          console.error('Error updating request:', error);\n          this.loading = false;\n        }\n      });\n    }\n    static ɵfac = function AddEditComponent_Factory(t) {\n      return new (t || AddEditComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.RequestService), i0.ɵɵdirectiveInject(i4.AccountService), i0.ɵɵdirectiveInject(i5.EmployeeService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AddEditComponent,\n      selectors: [[\"ng-component\"]],\n      decls: 48,\n      vars: 21,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"card\", \"shadow-sm\"], [1, \"card-header\", \"bg-white\", \"border-bottom-0\", \"pb-0\"], [1, \"mb-0\"], [1, \"card-body\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [\"for\", \"typeSelect\", 1, \"form-label\"], [\"id\", \"typeSelect\", \"formControlName\", \"type\", 1, \"form-select\", 3, \"ngClass\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"employeeSelect\", 1, \"form-label\"], [\"id\", \"employeeSelect\", \"formControlName\", \"employeeId\", 1, \"form-select\", 3, \"ngClass\"], [\"for\", \"descriptionInput\", 1, \"form-label\"], [\"id\", \"descriptionInput\", \"formControlName\", \"description\", \"rows\", \"3\", \"placeholder\", \"Enter a brief description...\", 1, \"form-control\", 3, \"ngClass\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-2\"], [1, \"form-label\", \"mb-0\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-primary\", \"d-flex\", \"align-items-center\", \"gap-1\", 3, \"click\"], [1, \"fas\", \"fa-plus\"], [\"formArrayName\", \"items\", 1, \"items-container\"], [\"class\", \"item-row mb-2\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\", \"justify-content-between\", \"mt-4\", \"gap-2\"], [\"routerLink\", \"../\", 1, \"btn\", \"btn-secondary\", \"px-4\", \"d-flex\", \"align-items-center\", \"gap-2\", 3, \"disabled\"], [1, \"fas\", \"fa-times\"], [1, \"btn\", \"btn-primary\", \"px-4\", \"d-flex\", \"align-items-center\", \"gap-2\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm me-1\", 4, \"ngIf\"], [1, \"fas\", \"fa-save\"], [3, \"value\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [1, \"item-row\", \"mb-2\", 3, \"formGroupName\"], [1, \"row\", \"g-2\", \"align-items-center\"], [1, \"col\"], [1, \"form-label\", 3, \"for\"], [\"formControlName\", \"description\", \"placeholder\", \"Item Description\", 1, \"form-control\", 3, \"id\", \"ngClass\"], [1, \"col-auto\"], [\"type\", \"number\", \"formControlName\", \"quantity\", 1, \"form-control\", 2, \"width\", \"100px\", 3, \"id\", \"ngClass\"], [1, \"col-auto\", \"d-flex\", \"align-items-end\"], [\"type\", \"button\", \"title\", \"Remove Item\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"mt-4\", \"d-flex\", \"align-items-center\", \"gap-1\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [1, \"spinner-border\", \"spinner-border-sm\", \"me-1\"]],\n      template: function AddEditComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h4\", 3);\n          i0.ɵɵtext(4);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(5, \"div\", 4)(6, \"form\", 5);\n          i0.ɵɵlistener(\"ngSubmit\", function AddEditComponent_Template_form_ngSubmit_6_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(7, \"div\", 6)(8, \"label\", 7);\n          i0.ɵɵtext(9, \"Request Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"select\", 8)(11, \"option\", 9);\n          i0.ɵɵtext(12, \"Select Request Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(13, AddEditComponent_option_13_Template, 3, 4, \"option\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(14, AddEditComponent_div_14_Template, 2, 1, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\", 6)(16, \"label\", 12);\n          i0.ɵɵtext(17, \"Employee\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"select\", 13)(19, \"option\", 9);\n          i0.ɵɵtext(20, \"Select Employee\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(21, AddEditComponent_option_21_Template, 2, 5, \"option\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(22, AddEditComponent_div_22_Template, 2, 1, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 6)(24, \"label\", 14);\n          i0.ɵɵtext(25, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(26, \"textarea\", 15);\n          i0.ɵɵtemplate(27, AddEditComponent_div_27_Template, 2, 1, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"div\", 6)(29, \"div\", 16)(30, \"label\", 17);\n          i0.ɵɵtext(31, \"Request Items\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(32, \"button\", 18);\n          i0.ɵɵlistener(\"click\", function AddEditComponent_Template_button_click_32_listener() {\n            return ctx.addItem();\n          });\n          i0.ɵɵelement(33, \"i\", 19);\n          i0.ɵɵelementStart(34, \"span\");\n          i0.ɵɵtext(35, \"Add Item\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(36, \"div\", 20);\n          i0.ɵɵtemplate(37, AddEditComponent_div_37_Template, 17, 13, \"div\", 21);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(38, \"div\", 22)(39, \"button\", 23);\n          i0.ɵɵelement(40, \"i\", 24);\n          i0.ɵɵelementStart(41, \"span\");\n          i0.ɵɵtext(42, \"Cancel\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(43, \"button\", 25);\n          i0.ɵɵtemplate(44, AddEditComponent_span_44_Template, 1, 0, \"span\", 26);\n          i0.ɵɵelement(45, \"i\", 27);\n          i0.ɵɵelementStart(46, \"span\");\n          i0.ɵɵtext(47);\n          i0.ɵɵelementEnd()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\"\", ctx.isAddMode ? \"Create\" : \"Edit\", \" Request\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"formGroup\", ctx.form);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(15, _c0, ctx.submitted && ctx.f.type.errors));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.requestTypes);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.type.errors);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(17, _c0, ctx.submitted && ctx.f.employeeId.errors));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.employees);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.employeeId.errors);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(19, _c0, ctx.submitted && ctx.f.description.errors));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.submitted && ctx.f.description.errors);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngForOf\", ctx.items.controls);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.isAddMode ? \"Create Request\" : \"Update Request\");\n        }\n      },\n      dependencies: [i6.NgClass, i6.NgForOf, i6.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName, i1.FormArrayName, i2.RouterLink, i6.TitleCasePipe],\n      styles: [\".items-container[_ngcontent-%COMP%] {\\r\\n    max-height: 300px;\\r\\n    overflow-y: auto;\\r\\n    padding: 1rem;\\r\\n    border: 1px solid #dee2e6;\\r\\n    border-radius: 0.25rem;\\r\\n    background-color: #f8f9fa;\\r\\n}\\r\\n\\r\\n.item-row[_ngcontent-%COMP%] {\\r\\n    background-color: white;\\r\\n    padding: 0.5rem;\\r\\n    border-radius: 0.25rem;\\r\\n    border: 1px solid #dee2e6;\\r\\n    transition: box-shadow 0.2s, background 0.2s;\\r\\n}\\r\\n\\r\\n.item-row[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #f8f9fa;\\r\\n    box-shadow: 0 2px 8px rgba(0,0,0,0.06);\\r\\n}\\r\\n\\r\\n.form-label[_ngcontent-%COMP%] {\\r\\n    font-weight: 500;\\r\\n}\\r\\n\\r\\n.btn-danger[_ngcontent-%COMP%], .btn-outline-danger[_ngcontent-%COMP%] {\\r\\n    padding: 0.25rem 0.5rem;\\r\\n}\\r\\n\\r\\n.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%] {\\r\\n    min-width: 100px;\\r\\n    font-weight: 500;\\r\\n}\\r\\n\\r\\n.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus {\\r\\n    border-color: #86b7fe;\\r\\n    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15);\\r\\n}\\r\\n\\r\\n.card[_ngcontent-%COMP%] {\\r\\n    border-radius: 0.5rem;\\r\\n    border: 1px solid #e3e6ea;\\r\\n}\\r\\n\\r\\n.card-header[_ngcontent-%COMP%] {\\r\\n    background: #fff;\\r\\n    border-bottom: 1px solid #e3e6ea;\\r\\n    padding: 1.25rem 2rem 0.5rem 2rem;\\r\\n}\\r\\n\\r\\n.card-body[_ngcontent-%COMP%] {\\r\\n    padding: 2rem;\\r\\n}\\r\\n\\r\\n.mt-4[_ngcontent-%COMP%] {\\r\\n    margin-top: 2rem !important;\\r\\n}\\r\\n\\r\\n.gap-1[_ngcontent-%COMP%] { gap: 0.25rem; }\\r\\n.gap-2[_ngcontent-%COMP%] { gap: 0.5rem; }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYWRtaW4vcmVxdWVzdHMvYWRkLWVkaXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsYUFBYTtJQUNiLHlCQUF5QjtJQUN6QixzQkFBc0I7SUFDdEIseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0ksdUJBQXVCO0lBQ3ZCLGVBQWU7SUFDZixzQkFBc0I7SUFDdEIseUJBQXlCO0lBQ3pCLDRDQUE0QztBQUNoRDs7QUFFQTtJQUNJLHlCQUF5QjtJQUN6QixzQ0FBc0M7QUFDMUM7O0FBRUE7SUFDSSxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSx1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSxnQkFBZ0I7SUFDaEIsZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0kscUJBQXFCO0lBQ3JCLGtEQUFrRDtBQUN0RDs7QUFFQTtJQUNJLHFCQUFxQjtJQUNyQix5QkFBeUI7QUFDN0I7O0FBRUE7SUFDSSxnQkFBZ0I7SUFDaEIsZ0NBQWdDO0lBQ2hDLGlDQUFpQztBQUNyQzs7QUFFQTtJQUNJLGFBQWE7QUFDakI7O0FBRUE7SUFDSSwyQkFBMkI7QUFDL0I7O0FBRUEsU0FBUyxZQUFZLEVBQUU7QUFDdkIsU0FBUyxXQUFXLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyIuaXRlbXMtY29udGFpbmVyIHtcclxuICAgIG1heC1oZWlnaHQ6IDMwMHB4O1xyXG4gICAgb3ZlcmZsb3cteTogYXV0bztcclxuICAgIHBhZGRpbmc6IDFyZW07XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGVlMmU2O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7XHJcbn1cclxuXHJcbi5pdGVtLXJvdyB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIHBhZGRpbmc6IDAuNXJlbTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDAuMjVyZW07XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGVlMmU2O1xyXG4gICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAwLjJzLCBiYWNrZ3JvdW5kIDAuMnM7XHJcbn1cclxuXHJcbi5pdGVtLXJvdzpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO1xyXG4gICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4wNik7XHJcbn1cclxuXHJcbi5mb3JtLWxhYmVsIHtcclxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbn1cclxuXHJcbi5idG4tZGFuZ2VyLCAuYnRuLW91dGxpbmUtZGFuZ2VyIHtcclxuICAgIHBhZGRpbmc6IDAuMjVyZW0gMC41cmVtO1xyXG59XHJcblxyXG4uYnRuLXByaW1hcnksIC5idG4tc2Vjb25kYXJ5IHtcclxuICAgIG1pbi13aWR0aDogMTAwcHg7XHJcbiAgICBmb250LXdlaWdodDogNTAwO1xyXG59XHJcblxyXG4uZm9ybS1jb250cm9sOmZvY3VzLCAuZm9ybS1zZWxlY3Q6Zm9jdXMge1xyXG4gICAgYm9yZGVyLWNvbG9yOiAjODZiN2ZlO1xyXG4gICAgYm94LXNoYWRvdzogMCAwIDAgMC4yNXJlbSByZ2JhKDEzLCAxMTAsIDI1MywgMC4xNSk7XHJcbn1cclxuXHJcbi5jYXJkIHtcclxuICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNlM2U2ZWE7XHJcbn1cclxuXHJcbi5jYXJkLWhlYWRlciB7XHJcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlM2U2ZWE7XHJcbiAgICBwYWRkaW5nOiAxLjI1cmVtIDJyZW0gMC41cmVtIDJyZW07XHJcbn1cclxuXHJcbi5jYXJkLWJvZHkge1xyXG4gICAgcGFkZGluZzogMnJlbTtcclxufVxyXG5cclxuLm10LTQge1xyXG4gICAgbWFyZ2luLXRvcDogMnJlbSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4uZ2FwLTEgeyBnYXA6IDAuMjVyZW07IH1cclxuLmdhcC0yIHsgZ2FwOiAwLjVyZW07IH0gIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n  return AddEditComponent;\n})();","map":{"version":3,"mappings":"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","names":["Validators","first","i0","AddEditComponent","formBuilder","route","router","requestService","accountService","employeeService","form","id","isAddMode","loading","submitted","requestTypes","employees","constructor","ngOnInit","snapshot","params","group","type","required","description","employeeId","items","array","getAll","subscribe","getById","pipe","request","patchValue","forEach","item","addItem","f","controls","get","itemForm","quantity","min","push","removeItem","index","removeAt","onSubmit","invalid","createRequest","updateRequest","requestPayload","value","create","next","navigate","relativeTo","error","console","update","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Jay Villafuerte\\OneDrive\\Desktop\\Final-Project-Intprog\\Frontend\\src\\app\\admin\\requests\\add-edit.component.ts","C:\\Users\\Jay Villafuerte\\OneDrive\\Desktop\\Final-Project-Intprog\\Frontend\\src\\app\\admin\\requests\\add-edit.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators, FormArray } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { first } from 'rxjs/operators';\r\nimport { RequestService } from '@app/_services/request.service';\r\nimport { Request, RequestItem } from '@app/_models/request';\r\nimport { AccountService } from '@app/_services/account.service';\r\nimport { EmployeeService } from '@app/_services/employee.service';\r\nimport { Employee } from '@app/_models/employee';\r\n\r\n@Component({\r\n    templateUrl: 'add-edit.component.html',\r\n    styleUrls: ['./add-edit.component.css']\r\n})\r\nexport class AddEditComponent implements OnInit {\r\n    form: FormGroup;\r\n    id: number;\r\n    isAddMode: boolean;\r\n    loading = false;\r\n    submitted = false;\r\n    requestTypes = ['equipment', 'leave', 'resource', 'other'];\r\n    employees: Employee[] = [];\r\n\r\n    constructor(\r\n        private formBuilder: FormBuilder,\r\n        private route: ActivatedRoute,\r\n        private router: Router,\r\n        private requestService: RequestService,\r\n        private accountService: AccountService,\r\n        private employeeService: EmployeeService\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n        this.id = this.route.snapshot.params['id'];\r\n        this.isAddMode = !this.id;\r\n\r\n        this.form = this.formBuilder.group({\r\n            type: ['', Validators.required],\r\n            description: ['', Validators.required],\r\n            employeeId: ['', Validators.required],\r\n            items: this.formBuilder.array([])\r\n        });\r\n\r\n        this.employeeService.getAll().subscribe(employees => {\r\n            this.employees = employees;\r\n        });\r\n\r\n        if (!this.isAddMode) {\r\n            this.loading = true;\r\n            this.requestService.getById(this.id)\r\n                .pipe(first())\r\n                .subscribe(request => {\r\n                    this.form.patchValue(request);\r\n                    if (request.items) {\r\n                        request.items.forEach(item => {\r\n                            this.addItem(item);\r\n                        });\r\n                    }\r\n                    this.loading = false;\r\n                });\r\n        }\r\n    }\r\n\r\n    // convenience getters for easy access to form fields\r\n    get f() { return this.form.controls; }\r\n    get items() { return this.form.get('items') as FormArray; }\r\n\r\n    addItem(item?: RequestItem) {\r\n        const itemForm = this.formBuilder.group({\r\n            description: [item?.description || '', Validators.required],\r\n            quantity: [item?.quantity || 1, [Validators.required, Validators.min(1)]]\r\n        });\r\n        this.items.push(itemForm);\r\n    }\r\n\r\n    removeItem(index: number) {\r\n        this.items.removeAt(index);\r\n    }\r\n\r\n    onSubmit() {\r\n        this.submitted = true;\r\n\r\n        // stop here if form is invalid\r\n        if (this.form.invalid) {\r\n            return;\r\n        }\r\n\r\n        this.loading = true;\r\n        if (this.isAddMode) {\r\n            this.createRequest();\r\n        } else {\r\n            this.updateRequest();\r\n        }\r\n    }\r\n\r\n    private createRequest() {\r\n        const requestPayload = {\r\n            ...this.form.value\r\n        };\r\n        this.requestService.create(requestPayload)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: () => {\r\n                    this.router.navigate(['../'], { relativeTo: this.route });\r\n                },\r\n                error: error => {\r\n                    console.error('Error creating request:', error);\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n\r\n    private updateRequest() {\r\n        this.requestService.update(this.id, this.form.value)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: () => {\r\n                    this.router.navigate(['../'], { relativeTo: this.route });\r\n                },\r\n                error: error => {\r\n                    console.error('Error updating request:', error);\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n}\r\n","<div class=\"container mt-4\">\r\n    <div class=\"card shadow-sm\">\r\n        <div class=\"card-header bg-white border-bottom-0 pb-0\">\r\n            <h4 class=\"mb-0\">{{isAddMode ? 'Create' : 'Edit'}} Request</h4>\r\n        </div>\r\n        <div class=\"card-body\">\r\n            <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\r\n                <div class=\"mb-3\">\r\n                    <label class=\"form-label\" for=\"typeSelect\">Request Type</label>\r\n                    <select id=\"typeSelect\" formControlName=\"type\" class=\"form-select\" [ngClass]=\"{ 'is-invalid': submitted && f.type.errors }\">\r\n                        <option value=\"\">Select Request Type</option>\r\n                        <option *ngFor=\"let type of requestTypes\" [value]=\"type\">{{type | titlecase}}</option>\r\n                    </select>\r\n                    <div *ngIf=\"submitted && f.type.errors\" class=\"invalid-feedback\">\r\n                        <div *ngIf=\"f.type.errors.required\">Type is required</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"mb-3\">\r\n                    <label class=\"form-label\" for=\"employeeSelect\">Employee</label>\r\n                    <select id=\"employeeSelect\" formControlName=\"employeeId\" class=\"form-select\" [ngClass]=\"{ 'is-invalid': submitted && f.employeeId.errors }\">\r\n                        <option value=\"\">Select Employee</option>\r\n                        <option *ngFor=\"let emp of employees\" [value]=\"emp.id\">\r\n                            {{ emp.employeeId }} - {{ emp.firstName }} {{ emp.lastName }} ({{ emp.position }})\r\n                        </option>\r\n                    </select>\r\n                    <div *ngIf=\"submitted && f.employeeId.errors\" class=\"invalid-feedback\">\r\n                        <div *ngIf=\"f.employeeId.errors.required\">Employee is required</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"mb-3\">\r\n                    <label class=\"form-label\" for=\"descriptionInput\">Description</label>\r\n                    <textarea id=\"descriptionInput\" formControlName=\"description\" class=\"form-control\" rows=\"3\" [ngClass]=\"{ 'is-invalid': submitted && f.description.errors }\" placeholder=\"Enter a brief description...\"></textarea>\r\n                    <div *ngIf=\"submitted && f.description.errors\" class=\"invalid-feedback\">\r\n                        <div *ngIf=\"f.description.errors.required\">Description is required</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"mb-3\">\r\n                    <div class=\"d-flex justify-content-between align-items-center mb-2\">\r\n                        <label class=\"form-label mb-0\">Request Items</label>\r\n                        <button type=\"button\" class=\"btn btn-sm btn-primary d-flex align-items-center gap-1\" (click)=\"addItem()\">\r\n                            <i class=\"fas fa-plus\"></i> <span>Add Item</span>\r\n                        </button>\r\n                    </div>\r\n                    <div formArrayName=\"items\" class=\"items-container\">\r\n                        <div *ngFor=\"let item of items.controls; let i = index\" [formGroupName]=\"i\" class=\"item-row mb-2\">\r\n                            <div class=\"row g-2 align-items-center\">\r\n                                <div class=\"col\">\r\n                                    <label class=\"form-label\" [for]=\"'itemDesc' + i\">Item Description</label>\r\n                                    <input [id]=\"'itemDesc' + i\" formControlName=\"description\" class=\"form-control\" placeholder=\"Item Description\" [ngClass]=\"{ 'is-invalid': submitted && item.get('description').errors }\">\r\n                                    <div *ngIf=\"submitted && item.get('description').errors\" class=\"invalid-feedback\">\r\n                                        <div *ngIf=\"item.get('description').errors.required\">Description is required</div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-auto\">\r\n                                    <label class=\"form-label\" [for]=\"'itemQty' + i\">Quantity</label>\r\n                                    <input type=\"number\" [id]=\"'itemQty' + i\" formControlName=\"quantity\" class=\"form-control\" style=\"width: 100px\" [ngClass]=\"{ 'is-invalid': submitted && item.get('quantity').errors }\">\r\n                                    <div *ngIf=\"submitted && item.get('quantity').errors\" class=\"invalid-feedback\">\r\n                                        <div *ngIf=\"item.get('quantity').errors.required\">Quantity is required</div>\r\n                                        <div *ngIf=\"item.get('quantity').errors.min\">Quantity must be at least 1</div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-auto d-flex align-items-end \">\r\n                                    \r\n                                    <button type=\"button\" class=\"btn btn-sm btn-outline-danger mt-4 d-flex align-items-center gap-1\" (click)=\"removeItem(i)\" title=\"Remove Item\">\r\n                                        <i class=\"fas fa-trash\"></i> <span>Remove</span>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"d-flex justify-content-between mt-4 gap-2\">\r\n                    <button [disabled]=\"loading\" class=\"btn btn-secondary px-4 d-flex align-items-center gap-2\" routerLink=\"../\">\r\n                        <i class=\"fas fa-times\"></i> <span>Cancel</span>\r\n                    </button>\r\n                    <button [disabled]=\"loading\" class=\"btn btn-primary px-4 d-flex align-items-center gap-2\">\r\n                        <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm me-1\"></span>\r\n                        <i class=\"fas fa-save\"></i> <span>{{isAddMode ? 'Create Request' : 'Update Request'}}</span>\r\n                    </button>\r\n                </div>\r\n               \r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}