{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/_services/request.service\";\nimport * as i2 from \"@app/_services/account.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nfunction ListComponent_th_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Actions\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 12)(2, \"div\", 13)(3, \"span\", 14);\n    i0.ɵɵtext(4, \"Loading...\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction ListComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 12);\n    i0.ɵɵelement(2, \"i\", 15)(3, \"br\");\n    i0.ɵɵelementStart(4, \"span\", 16);\n    i0.ɵɵtext(5, \"No requests found\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ListComponent_tr_29_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", item_r7.description, \" (\", item_r7.quantity, \") \");\n  }\n}\nfunction ListComponent_tr_29_td_19_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function ListComponent_tr_29_td_19_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const request_r4 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.approveRequest(request_r4.id));\n    });\n    i0.ɵɵelement(1, \"i\", 28);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"Approve\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ListComponent_tr_29_td_19_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function ListComponent_tr_29_td_19_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const request_r4 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.rejectRequest(request_r4.id));\n    });\n    i0.ɵɵelement(1, \"i\", 30);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"Reject\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ListComponent_tr_29_td_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\")(1, \"div\", 22);\n    i0.ɵɵtemplate(2, ListComponent_tr_29_td_19_button_2_Template, 4, 0, \"button\", 23);\n    i0.ɵɵtemplate(3, ListComponent_tr_29_td_19_button_3_Template, 4, 0, \"button\", 24);\n    i0.ɵɵelementStart(4, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function ListComponent_tr_29_td_19_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const request_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.deleteRequest(request_r4.id));\n    });\n    i0.ɵɵelement(5, \"i\", 26);\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7, \"Delete\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const request_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", request_r4.status === \"Pending\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", request_r4.status === \"Pending\");\n  }\n}\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"badge bg-warning\": a0,\n    \"badge bg-success\": a1,\n    \"badge bg-danger\": a2\n  };\n};\nfunction ListComponent_tr_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 17)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\")(7, \"span\", 18);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementStart(11, \"small\", 19);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"td\")(14, \"ul\", 20);\n    i0.ɵɵtemplate(15, ListComponent_tr_29_li_15_Template, 2, 2, \"li\", 21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, ListComponent_tr_29_td_19_Template, 8, 2, \"td\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const request_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 10, request_r4.type));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(request_r4.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(15, _c0, request_r4.status === \"Pending\", request_r4.status === \"Approved\", request_r4.status === \"Rejected\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", request_r4.status, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", request_r4.employee == null ? null : request_r4.employee.firstName, \" \", request_r4.employee == null ? null : request_r4.employee.lastName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(request_r4.employee == null ? null : request_r4.employee.position);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", request_r4.items);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(18, 12, request_r4.createdAt, \"medium\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.isAdmin);\n  }\n}\nexport let ListComponent = /*#__PURE__*/(() => {\n  class ListComponent {\n    requestService;\n    accountService;\n    requests = [];\n    loading = false;\n    isAdmin = false;\n    constructor(requestService, accountService) {\n      this.requestService = requestService;\n      this.accountService = accountService;\n      this.isAdmin = this.accountService.accountValue?.role === 'Admin';\n    }\n    ngOnInit() {\n      this.loading = true;\n      if (this.isAdmin) {\n        this.requestService.getAll().pipe(first()).subscribe(requests => {\n          this.requests = requests;\n          this.loading = false;\n        });\n      } else {\n        const employeeId = this.accountService.accountValue?.id;\n        if (employeeId) {\n          this.requestService.getByEmployeeId(Number(employeeId)).pipe(first()).subscribe(requests => {\n            this.requests = requests;\n            this.loading = false;\n          });\n        }\n      }\n    }\n    deleteRequest(id) {\n      if (!confirm('Are you sure you want to delete this request?')) return;\n      this.loading = true;\n      this.requestService.delete(id).pipe(first()).subscribe({\n        next: () => {\n          this.requests = this.requests.filter(x => x.id !== id);\n          this.loading = false;\n        },\n        error: err => {\n          alert('Failed to delete request.');\n          this.loading = false;\n        }\n      });\n    }\n    approveRequest(id) {\n      this.loading = true;\n      this.requestService.approve(id).pipe(first()).subscribe({\n        next: updatedRequest => {\n          const index = this.requests.findIndex(x => x.id === id);\n          if (index !== -1) this.requests[index] = updatedRequest;\n          this.loading = false;\n        },\n        error: err => {\n          alert('Failed to approve request.');\n          this.loading = false;\n        }\n      });\n    }\n    rejectRequest(id) {\n      this.loading = true;\n      this.requestService.reject(id).pipe(first()).subscribe({\n        next: updatedRequest => {\n          const index = this.requests.findIndex(x => x.id === id);\n          if (index !== -1) this.requests[index] = updatedRequest;\n          this.loading = false;\n        },\n        error: err => {\n          alert('Failed to reject request.');\n          this.loading = false;\n        }\n      });\n    }\n    static ɵfac = function ListComponent_Factory(t) {\n      return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.RequestService), i0.ɵɵdirectiveInject(i2.AccountService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ListComponent,\n      selectors: [[\"ng-component\"]],\n      decls: 30,\n      vars: 4,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\"], [1, \"mb-0\"], [\"routerLink\", \"add\", 1, \"btn\", \"btn-primary\", \"d-flex\", \"align-items-center\", \"gap-2\"], [1, \"fas\", \"fa-plus\"], [1, \"card\", \"shadow-sm\"], [1, \"card-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\", \"align-middle\"], [1, \"table-light\"], [4, \"ngIf\"], [\"class\", \"table-row-hover\", 4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"7\", 1, \"text-center\", \"py-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"visually-hidden\"], [1, \"fas\", \"fa-inbox\", \"fa-2x\", \"text-muted\", \"mb-2\"], [1, \"text-muted\"], [1, \"table-row-hover\"], [3, \"ngClass\"], [1, \"d-block\", \"text-muted\"], [1, \"list-unstyled\", \"mb-0\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn-group\", \"gap-1\"], [\"class\", \"btn btn-sm btn-success d-flex align-items-center gap-1\", \"title\", \"Approve\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-sm btn-danger d-flex align-items-center gap-1\", \"title\", \"Reject\", 3, \"click\", 4, \"ngIf\"], [\"title\", \"Delete\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"d-flex\", \"align-items-center\", \"gap-1\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [\"title\", \"Approve\", 1, \"btn\", \"btn-sm\", \"btn-success\", \"d-flex\", \"align-items-center\", \"gap-1\", 3, \"click\"], [1, \"fas\", \"fa-check\"], [\"title\", \"Reject\", 1, \"btn\", \"btn-sm\", \"btn-danger\", \"d-flex\", \"align-items-center\", \"gap-1\", 3, \"click\"], [1, \"fas\", \"fa-times\"]],\n      template: function ListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n          i0.ɵɵtext(3, \"Requests\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 3);\n          i0.ɵɵelement(5, \"i\", 4);\n          i0.ɵɵtext(6, \" Create Request \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"div\", 7)(10, \"table\", 8)(11, \"thead\", 9)(12, \"tr\")(13, \"th\");\n          i0.ɵɵtext(14, \"Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"th\");\n          i0.ɵɵtext(16, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"th\");\n          i0.ɵɵtext(18, \"Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"th\");\n          i0.ɵɵtext(20, \"Employee\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"th\");\n          i0.ɵɵtext(22, \"Items\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"th\");\n          i0.ɵɵtext(24, \"Created\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(25, ListComponent_th_25_Template, 2, 0, \"th\", 10);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(26, \"tbody\");\n          i0.ɵɵtemplate(27, ListComponent_tr_27_Template, 5, 0, \"tr\", 10);\n          i0.ɵɵtemplate(28, ListComponent_tr_28_Template, 6, 0, \"tr\", 10);\n          i0.ɵɵtemplate(29, ListComponent_tr_29_Template, 20, 19, \"tr\", 11);\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(25);\n          i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.requests.length === 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.requests);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.RouterLink, i3.TitleCasePipe, i3.DatePipe],\n      styles: [\".table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\r\\n    background-color: #f8f9fa;\\r\\n    font-weight: 600;\\r\\n}\\r\\n\\r\\n.badge[_ngcontent-%COMP%] {\\r\\n    font-size: 0.85em;\\r\\n    padding: 0.5em 0.75em;\\r\\n}\\r\\n\\r\\n.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] {\\r\\n    padding: 0.25rem 0.5rem;\\r\\n    font-size: 0.875rem;\\r\\n    transition: background 0.2s, color 0.2s, box-shadow 0.2s;\\r\\n}\\r\\n\\r\\n.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus {\\r\\n    box-shadow: 0 2px 8px rgba(0,0,0,0.08);\\r\\n    z-index: 1;\\r\\n}\\r\\n\\r\\n.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 0.25rem;\\r\\n}\\r\\n\\r\\n.text-muted[_ngcontent-%COMP%] {\\r\\n    font-size: 0.875rem;\\r\\n}\\r\\n\\r\\n.table-row-hover[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #f1f3f5;\\r\\n    transition: background 0.2s;\\r\\n}\\r\\n\\r\\n.card[_ngcontent-%COMP%] {\\r\\n    border-radius: 0.5rem;\\r\\n    border: 1px solid #e3e6ea;\\r\\n}\\r\\n\\r\\n.card-body[_ngcontent-%COMP%] {\\r\\n    padding: 2rem;\\r\\n}\\r\\n\\r\\n.table[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 0;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYWRtaW4vcmVxdWVzdHMvbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0kseUJBQXlCO0lBQ3pCLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixxQkFBcUI7QUFDekI7O0FBRUE7SUFDSSx1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLHdEQUF3RDtBQUM1RDs7QUFFQTtJQUNJLHNDQUFzQztJQUN0QyxVQUFVO0FBQ2Q7O0FBRUE7SUFDSSxzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSx5QkFBeUI7SUFDekIsMkJBQTJCO0FBQy9COztBQUVBO0lBQ0kscUJBQXFCO0lBQ3JCLHlCQUF5QjtBQUM3Qjs7QUFFQTtJQUNJLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxnQkFBZ0I7QUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyIudGFibGUgdGgge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbn1cclxuXHJcbi5iYWRnZSB7XHJcbiAgICBmb250LXNpemU6IDAuODVlbTtcclxuICAgIHBhZGRpbmc6IDAuNWVtIDAuNzVlbTtcclxufVxyXG5cclxuLmJ0bi1ncm91cCAuYnRuIHtcclxuICAgIHBhZGRpbmc6IDAuMjVyZW0gMC41cmVtO1xyXG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcclxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycywgY29sb3IgMC4ycywgYm94LXNoYWRvdyAwLjJzO1xyXG59XHJcblxyXG4uYnRuLWdyb3VwIC5idG46aG92ZXIsIC5idG4tZ3JvdXAgLmJ0bjpmb2N1cyB7XHJcbiAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwwLjA4KTtcclxuICAgIHotaW5kZXg6IDE7XHJcbn1cclxuXHJcbi5saXN0LXVuc3R5bGVkIGxpIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDAuMjVyZW07XHJcbn1cclxuXHJcbi50ZXh0LW11dGVkIHtcclxuICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XHJcbn1cclxuXHJcbi50YWJsZS1yb3ctaG92ZXI6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjNmNTtcclxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycztcclxufVxyXG5cclxuLmNhcmQge1xyXG4gICAgYm9yZGVyLXJhZGl1czogMC41cmVtO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2UzZTZlYTtcclxufVxyXG5cclxuLmNhcmQtYm9keSB7XHJcbiAgICBwYWRkaW5nOiAycmVtO1xyXG59XHJcblxyXG4udGFibGUge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMDtcclxufSAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n  return ListComponent;\n})();","map":{"version":3,"mappings":"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","names":["first","i0","ListComponent","requestService","accountService","requests","loading","isAdmin","constructor","accountValue","role","ngOnInit","getAll","pipe","subscribe","employeeId","id","getByEmployeeId","Number","deleteRequest","confirm","delete","next","filter","x","error","err","alert","approveRequest","approve","updatedRequest","index","findIndex","rejectRequest","reject","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Jay Villafuerte\\OneDrive\\Desktop\\final-project_intprog-main\\frontend\\src\\app\\admin\\requests\\list.component.ts","C:\\Users\\Jay Villafuerte\\OneDrive\\Desktop\\final-project_intprog-main\\frontend\\src\\app\\admin\\requests\\list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { first } from 'rxjs/operators';\r\nimport { Request } from '@app/_models/request';\r\nimport { RequestService } from '@app/_services/request.service';\r\nimport { AccountService } from '@app/_services/account.service';\r\n\r\n@Component({\r\n    templateUrl: 'list.component.html',\r\n    styleUrls: ['./list.component.css']\r\n})\r\nexport class ListComponent implements OnInit {\r\n    requests: Request[] = [];\r\n    loading = false;\r\n    isAdmin = false;\r\n\r\n    constructor(\r\n        private requestService: RequestService,\r\n        private accountService: AccountService\r\n    ) {\r\n        this.isAdmin = this.accountService.accountValue?.role === 'Admin';\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.loading = true;\r\n        if (this.isAdmin) {\r\n            this.requestService.getAll()\r\n                .pipe(first())\r\n                .subscribe(requests => {\r\n                    this.requests = requests;\r\n                    this.loading = false;\r\n                });\r\n        } else {\r\n            const employeeId = this.accountService.accountValue?.id;\r\n            if (employeeId) {\r\n                this.requestService.getByEmployeeId(Number(employeeId))\r\n                    .pipe(first())\r\n                    .subscribe(requests => {\r\n                        this.requests = requests;\r\n                        this.loading = false;\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    deleteRequest(id: number) {\r\n        if (!confirm('Are you sure you want to delete this request?')) return;\r\n        this.loading = true;\r\n        this.requestService.delete(id)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: () => {\r\n                    this.requests = this.requests.filter(x => x.id !== id);\r\n                    this.loading = false;\r\n                },\r\n                error: err => {\r\n                    alert('Failed to delete request.');\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n\r\n    approveRequest(id: number) {\r\n        this.loading = true;\r\n        this.requestService.approve(id)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: updatedRequest => {\r\n                    const index = this.requests.findIndex(x => x.id === id);\r\n                    if (index !== -1) this.requests[index] = updatedRequest;\r\n                    this.loading = false;\r\n                },\r\n                error: err => {\r\n                    alert('Failed to approve request.');\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n\r\n    rejectRequest(id: number) {\r\n        this.loading = true;\r\n        this.requestService.reject(id)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: updatedRequest => {\r\n                    const index = this.requests.findIndex(x => x.id === id);\r\n                    if (index !== -1) this.requests[index] = updatedRequest;\r\n                    this.loading = false;\r\n                },\r\n                error: err => {\r\n                    alert('Failed to reject request.');\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n}\r\n","<div class=\"container mt-4\">\r\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <h2 class=\"mb-0\">Requests</h2>\r\n        <button class=\"btn btn-primary d-flex align-items-center gap-2\" routerLink=\"add\">\r\n            <i class=\"fas fa-plus\"></i> Create Request\r\n        </button>\r\n    </div>\r\n\r\n    <div class=\"card shadow-sm\">\r\n        <div class=\"card-body\">\r\n            <div class=\"table-responsive\">\r\n                <table class=\"table table-striped align-middle\">\r\n                    <thead class=\"table-light\">\r\n                        <tr>\r\n                            <th>Type</th>\r\n                            <th>Description</th>\r\n                            <th>Status</th>\r\n                            <th>Employee</th>\r\n                            <th>Items</th>\r\n                            <th>Created</th>\r\n                            <th *ngIf=\"isAdmin\">Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf=\"loading\">\r\n                            <td colspan=\"7\" class=\"text-center py-5\">\r\n                                <div class=\"spinner-border text-primary\" role=\"status\">\r\n                                    <span class=\"visually-hidden\">Loading...</span>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                        <tr *ngIf=\"!loading && requests.length === 0\">\r\n                            <td colspan=\"7\" class=\"text-center py-5\">\r\n                                <i class=\"fas fa-inbox fa-2x text-muted mb-2\"></i><br>\r\n                                <span class=\"text-muted\">No requests found</span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr *ngFor=\"let request of requests\" class=\"table-row-hover\">\r\n                            <td>{{request.type | titlecase}}</td>\r\n                            <td>{{request.description}}</td>\r\n                            <td>\r\n                                <span [ngClass]=\"{\r\n                                    'badge bg-warning': request.status === 'Pending',\r\n                                    'badge bg-success': request.status === 'Approved',\r\n                                    'badge bg-danger': request.status === 'Rejected'\r\n                                }\">\r\n                                    {{request.status}}\r\n                                </span>\r\n                            </td>\r\n                            <td>\r\n                                {{request.employee?.firstName}} {{request.employee?.lastName}}\r\n                                <small class=\"d-block text-muted\">{{request.employee?.position}}</small>\r\n                            </td>\r\n                            <td>\r\n                                <ul class=\"list-unstyled mb-0\">\r\n                                    <li *ngFor=\"let item of request.items\">\r\n                                        {{item.description}} ({{item.quantity}})\r\n                                    </li>\r\n                                </ul>\r\n                            </td>\r\n                            <td>{{request.createdAt | date:'medium'}}</td>\r\n                            <td *ngIf=\"isAdmin\">\r\n                                <div class=\"btn-group gap-1\">\r\n                                    <button class=\"btn btn-sm btn-success d-flex align-items-center gap-1\" \r\n                                            *ngIf=\"request.status === 'Pending'\"\r\n                                            (click)=\"approveRequest(request.id)\"\r\n                                            title=\"Approve\">\r\n                                        <i class=\"fas fa-check\"></i> <span>Approve</span>\r\n                                    </button>\r\n                                    <button class=\"btn btn-sm btn-danger d-flex align-items-center gap-1\" \r\n                                            *ngIf=\"request.status === 'Pending'\"\r\n                                            (click)=\"rejectRequest(request.id)\"\r\n                                            title=\"Reject\">\r\n                                        <i class=\"fas fa-times\"></i> <span>Reject</span>\r\n                                    </button>\r\n                                    <button class=\"btn btn-sm btn-outline-danger d-flex align-items-center gap-1\" \r\n                                            (click)=\"deleteRequest(request.id)\"\r\n                                            title=\"Delete\">\r\n                                        <i class=\"fas fa-trash\"></i> <span>Delete</span>\r\n                                    </button>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}